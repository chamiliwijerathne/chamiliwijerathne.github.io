---
import { Image } from 'astro:assets';
import type { FooterType as Props } from './footer.types';
import { NAV_ITEM_TYPES } from '../header';

const { id, items, classNames, copyRight, img } = Astro.props;

const imgClasses = [
   'footer-img',
   Array.isArray(img?.classNames) ? img.classNames.join(' ') : img?.classNames || '',
]
   .filter(Boolean)
   .join(' ');
---

<footer class="md:pt-[94px]">
   <div class="text-center space-y-8">
      <div class="flex justify-center items-center space-x-6">
         {
            (items ?? []).map((item) => {
               if (item.type === NAV_ITEM_TYPES.IMAGE) {
                  return (
                     <a
                        href={item.href.url}
                        target={item.href.target}
                        rel={item.href.rel?.join(' ')}
                        class="hover:opacity-70 transition-opacity"
                     >
                        {item.img ? (
                           <Image
                              src={item.img.src as ImageMetadata}
                              alt={item.img.alt || 'Logo'}
                              width={item.img.width}
                              height={item.img.height}
                              class="inline-block"
                           />
                        ) : (
                           <span class="text-xl font-bold">{item.label || 'Brand'}</span>
                        )}
                     </a>
                  );
               }

               if (item.type === NAV_ITEM_TYPES.LINK) {
                  return (
                     <a
                        href={item.href.url}
                        target={item.href.target}
                        rel={item.href.rel?.join(' ')}
                        class="font-semibold hover:opacity-70 transition-opacity"
                     >
                        {item.label}
                     </a>
                  );
               }

               return null;
            })
         }
      </div>
      <p class="text-neutral-500 md:pb-[94px]">
         {copyRight || ''}
      </p>
      {img && <div class="relative"><Image src={img.src as ImageMetadata} alt={img.alt || ''} class={imgClasses} style={img.style} loading={img.loading as any || 'eager'} /></div>}
   </div>
</footer>
