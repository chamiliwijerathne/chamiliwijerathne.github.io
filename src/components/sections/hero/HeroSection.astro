---
import { Image } from 'astro:assets';
import { ContainerRenderer } from '../../blocks';
import type { HeroSectionType as Props } from './hero.types';

const { id, backgroundImage, classNames, img, style, containers } = Astro.props;

const baseClass = 'hero-section';
const extraClasses = Array.isArray(classNames) ? classNames.join(' ') : classNames || '';
const classes = [baseClass, extraClasses].filter(Boolean).join(' ');

const imgClasses = [
   'hero-img',
   Array.isArray(img?.classNames) ? img.classNames.join(' ') : img?.classNames || '',
]
   .filter(Boolean)
   .join(' ');
---

<section class={classes} id={id} style={style}>
   {
      backgroundImage && (
         <div class="background-image" style={`background-image: url(${backgroundImage});`} />
      )
   }
   {img && <Image src={img.src as ImageMetadata} alt={img.alt || ''} class={imgClasses} style={img.style} loading={img.loading as any || 'eager'} />}
   {containers && containers.map((container) => <ContainerRenderer {...container} />)}
</section>
